# ä½¿ç”¨æ ˆ (Stacks) æ¥å¸ƒå±€è§†å›¾

ä½¿ç”¨ SwiftUI å£°æ˜Žæ€§è¯­æ³•åˆ›å»º / ä¿®æ”¹å’Œç»„åˆè§†å›¾ä»¥ç»„æˆåº”ç”¨ç¨‹åºçš„ UI, ä½ å°†å¼€å§‹æž„å»º Scrumdingerï¼Œè¿™æ˜¯ä¸€ä¸ªç®¡ç†ä¼šè®®çš„åº”ç”¨ç¨‹åº, é€šè¿‡æŽ’åˆ—è§†å›¾ç»„æ¥åˆ›å»ºä¼šè®®è®¡æ—¶å™¨å±å¹•. éšç€æ‚¨é€æ­¥å­¦ä¹ è¯¥æ¨¡å—, æ‚¨å°†åœ¨å®Œæˆæœ€ç»ˆè®¾è®¡æ—¶é‡æ–°è®¿é—®è®¡æ—¶å™¨å±å¹•. 

æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤å¼€å§‹æ‚¨çš„æ–°é¡¹ç›®ï¼Œæˆ–æ‰“å¼€å®Œæˆçš„é¡¹ç›®å¹¶è‡ªè¡ŒæŽ¢ç´¢ä»£ç .

[å·¥ç¨‹ä»£ç ](https://docs-assets.developer.apple.com/published/97f26bbb7d93c4a8adca34fa09b26ee5/UsingStacksToArrangeViews.zip)
[Xcode 13](https://apps.apple.com/us/app/xcode/id497799835?mt=12)


## ç¬¬ä¸€éƒ¨åˆ† åˆ›å»ºå·¥ç¨‹
åœ¨æœ¬æ¨¡å—ä¸­ï¼Œæ‚¨å°†é€šè¿‡åˆ›å»º Scrumdinger å­¦ä¹ åº”ç”¨ç¨‹åºå¼€å‘çš„åŸºæœ¬çŸ¥è¯†ã€‚ åœ¨å‘åº”ç”¨ç¨‹åºæ·»åŠ æ–°åŠŸèƒ½æ—¶ï¼Œæ‚¨å°†æŽ¢ç´¢ Xcode å’Œ SwiftUI çš„åŸºç¡€çŸ¥è¯†ã€‚ åœ¨æœ¬èŠ‚ä¸­ï¼Œæ‚¨å°†ä¸º Scrumdinger åˆ›å»º Xcode é¡¹ç›®ã€‚

![å·¥ç¨‹ç»“æž„](images/20230131143614.png)

1. é€šè¿‡ iOS app æ¨¡æ¿åˆ›å»ºæ–°çš„ iOS app å·¥ç¨‹
   ![åˆ›å»ºæ–° app](images/20230131143836.png)

2. åœ¨å·¥ç¨‹è®¾ç½®ä¸­, å‘½åäº§å“åå­—ä¸º "Scrumdinger", åœ¨ç•Œé¢ (Interface) ä¸‹æ‹‰æ¡†é€‰åˆ™ SwiftUI. æ¨¡æ¿åŒ…å«äº†ä¸€ä¸ªèµ·å§‹æ–‡ä»¶, åŒ…å« app çš„åˆå§‹è§†å›¾: `ContentView.swift`, ä¸€ä¸ªå®šä¹‰äº† app å…¥å£ç‚¹çš„æ–‡ä»¶: `ScrumdingerApp.swift`. 

3. é€‰æ‹©ä¸€ä¸ªåœ°æ–¹æ¥ä¿å­˜ä½ çš„å·¥ç¨‹:
   ![ä¿å­˜å·¥ç¨‹](images/20230131144423.png)

## ç¬¬äºŒéƒ¨åˆ† åˆ›å»ºè§†å›¾ç»„(Groups of Views)
è§†å›¾å®šä¹‰äº† UI çš„ä¸€éƒ¨åˆ†ã€‚ å®ƒä»¬æ˜¯æ‚¨åº”ç”¨ç¨‹åºçš„æž„å»ºåŸºçŸ³ã€‚ æ‚¨å¯ä»¥é€šè¿‡å°†å°çš„ã€ç®€å•çš„è§†å›¾ç»„åˆèµ·æ¥æ¥æž„å»ºå¤æ‚çš„è§†å›¾ã€‚ åœ¨æœ¬èŠ‚ä¸­ï¼Œæ‚¨å°†æž„å»ºè®¡æ—¶å™¨å±å¹•çš„æ ‡é¢˜ (header) ä»¥æ˜¾ç¤ºä¼šè®®çš„å·²ç”¨æ—¶é—´å’Œå‰©ä½™æ—¶é—´ã€‚
![è§†å›¾ç»„æˆ](images/20230131144704.png)
* ç•ªå¤–: SwiftUI ä¸­æœ‰ä¸‰ç§ Stack, åˆ†åˆ«æ˜¯ VStack(åž‚ç›´æ ˆ) / HStack (æ°´å¹³æ ˆ) / ZStack (å‰åŽæ ˆ), åŽé¢å›žè¯¦ç»†çš„è®²

1. æ‰“å¼€ `ContentView.swift` é»˜è®¤çš„ SwiftUI è§†å›¾æ–‡ä»¶å£°æ˜Žäº†ä¸¤ä¸ªç»“æž„ä½“ã€‚ ç¬¬ä¸€ä¸ªç»“æž„ä½“éµå¾ª View protocolï¼Œå®ƒåªæœ‰ä¸€ä¸ªè¦æ±‚ï¼šä¸€ä¸ª body å±žæ€§ è¿”å›žä¸€ä¸ª Viewã€‚ åœ¨ body å±žæ€§ä¸­ï¼Œæ‚¨æè¿°äº†è§†å›¾çš„å†…å®¹ã€å¸ƒå±€å’Œ View çš„è¡Œä¸ºã€‚ ç¬¬äºŒä¸ªç»“æž„ä½“å£°æ˜Žè¯¥è§†å›¾åœ¨ç”»å¸ƒä¸Šæ˜¾ç¤ºçš„é¢„è§ˆã€‚
   ![ContentView æ–‡ä»¶](images/20230131145332.png)
   æŽ¥ä¸‹æ¥æˆ‘ä»¬é‡æž„ `ContentView.swift` ä¸ºå…¶æŒ‡å®šä¸€ä¸ªåç§°

2. å³é”®ç‚¹å‡» `ContentView` ç»“æž„ä½“, é€‰æ‹© "Refactor > Rename", å°†å…¶é‡å‘½åä¸º `MeetingView`
   ![é‡å‘½å](images/20230131150459.png)
   ä¸ºä¿æŒå‘½åçš„ä¸€è‡´æ€§, åŒæ—¶ä¹Ÿå¯ä»¥æŠŠé¢„è§ˆè§†å›¾çš„ç»“æž„ä½“ä¹Ÿæ”¹åæˆä¸º `MeetingView_Previews`

3. ä½¿ç”¨ä¸€ä¸ª `ProgressView` æ›¿æ¢çŽ°æœ‰ body ä¸­å­˜åœ¨çš„å†…å®¹, å¹¶ä¸”ç”¨å ä½æ•°æ®æ¥åˆå§‹åŒ–å½“å‰è§†å›¾
   ![æ·»åŠ è¿›åº¦æ¡](images/20230131151135.png)
   æ‚¨å°†ä½¿ç”¨è¿›åº¦è§†å›¾æ¥æ˜¾ç¤º Scrum æœŸé—´æ‰€ç”¨æ—¶é—´çš„ç™¾åˆ†æ¯”ã€‚ è¿›åº¦è§†å›¾è¿˜å¯ä»¥æ˜¾ç¤ºä¸ç¡®å®šçš„è¿›åº¦ï¼Œä¾‹å¦‚åº”ç”¨åŠ è½½æ•°æ®çš„æ—¶é—´ã€‚

4. åœ¨ xcode çš„ç”»å¸ƒéƒ¨åˆ†ç‚¹å‡» 'Resume' æ¥å±•ç¤ºé¢„è§ˆ. å½“æ‚¨åœ¨é¡¹ç›®å¯¼èˆªå™¨ä¸­é€‰æ‹©ä¸€ä¸ª SwiftUI æ–‡ä»¶æ—¶ï¼Œç”»å¸ƒä¼šä¸Žç¼–è¾‘å™¨ä¸€èµ·æ‰“å¼€ã€‚ ç”»å¸ƒä¼šå‘æ‚¨æ˜¾ç¤ºè§†å›¾è¿è¡Œæ—¶çš„é¢„è§ˆã€‚
   ![ç‚¹å‡»ç»§ç»­](images/20230131151601.png)

5. æŒ‰ä½ `cmd` ç‚¹å‡» `ProgressView` å¹¶ä¸”é€‰æ‹© 'Embed in VStack' (åµŒå…¥åˆ° VStack). æ ˆ (Stacks) æŒ‰ç…§æ°´å¹³ (horizontally) / åž‚ç›´ (vertically) / å‰åŽ (back to front) æ¥åˆ†ç»„è§†å›¾, ä½ å¯ä»¥ä½¿ç”¨å®ƒæ¥ç»„åˆæˆ–è€…åˆ†å±‚ä½ çš„ view ç»„ä»¶.
   ![åµŒå…¥Væ ˆ](images/20230131152058.png)

6. åœ¨ä»£ç ä¸­åˆ›å»ºä¸€ä¸ªæ°´å¹³æ ˆ (HStack), ç‚¹å‡» Library æŒ‰é’®, æ‹–è¿›æ¥ä¸€ä¸ª text view åˆ°è¿™ä¸ª HStack ä¸­, å°†å®ƒçš„å€¼æ”¹ä¸º "Secndes Elapsed". å›¾ç‰‡è¯·å‚è€ƒä¸Šå›¾ðŸ‘†ðŸ»
   
7. æ·»åŠ å¦å¤–ä¸€ä¸ª text view, å†…å®¹ä¸º "Seconds Remaining".
   ![å¢žåŠ ä¸¤ä¸ª text view](images/20230131160104.png)

8. åµŒå…¥åˆ°ä¸¤ä¸ªä¸åŒçš„ VStack:
   ```swift
   HStack {
        VStack {
            Text("Seconds Elapsed")
        }
        VStack {
            Text("Seconds Remaining")
        }
    }
   ```

9.  åœ¨ç¬¬ä¸€ä¸ª texe view ä¸‹é¢æ·»åŠ ä¸€ä¸ª `label`, å®ƒçš„ `title` æ˜¯ 300, `systemImage` å‚æ•°æ˜¯ "hourglass.bottomhalf.fill"
    ![æ·»åŠ å±žæ€§](images/20230131160543.png)
    æ³¨æ„: è¿™é‡Œçš„è¿™ä¸ªç³»ç»Ÿå›¾ç‰‡æ¥æºè‡ª[è‹¹æžœå®˜æ–¹ SF Symbols](https://developer.apple.com/sf-symbols/) ç³»ç»Ÿ, æ˜¯è‹¹æžœç³»ç»Ÿé›†æˆçš„ç¬¦å·é›†, å…¶ä¸­çš„ç¬¦å·ä¼šè¢«å½“åšå­—ä½“æ¥å¯¹å¾…, å› æ­¤å¯ä»¥è¿›è¡ŒåŠ¨æ€æ— æŸç¼©æ”¾, é€‚é…ä¸åŒçš„ç³»ç»Ÿåˆ†è¾¨çŽ‡.

10. åœ¨ç¬¬äºŒä¸ª text view ä¸‹é¢æ·»åŠ ä¸€ä¸ª `label`, å®ƒçš„ `title` æ˜¯ 600, `systemImage` å‚æ•°æ˜¯ "hourglass.tophalf.fill"
    ![æ·»åŠ ç¬¬äºŒä¸ª lable](images/20230131160942.png)

## ç¬¬ä¸‰éƒ¨åˆ† è§†å›¾ä¿®æ”¹ä¸Žé£Žæ ¼åŒ–

çŽ°åœ¨æˆ‘ä»¬å·²ç»åˆ›å»ºäº†æœ€åŸºç¡€çš„è§†å›¾, åŒ…æ‹¬header, æŽ¥ä¸‹æ¥è®¾è®¡ä¼šè®®å‰©ä½™æ—¶é—´è®¡æ—¶å™¨çš„åŽŸåž‹, å¹¶ä¸”è¿›è¡Œé£Žæ ¼åŒ–, åœ¨è¿™é‡Œä½ ä¼šæ·»åŠ å†…ç½®çš„é£Žæ ¼ä¿®é¥°å™¨ (modifiers) ç”¨ä»¥è°ƒæ•´ header éƒ¨åˆ†çš„æ ·å¼, åŒæ—¶è¿˜ä¼šæ·»åŠ æ–°çš„ stacks å’Œ views, å¹¶ä¸”å¼€å§‹æ·»åŠ æŽ§åˆ¶éƒ¨åˆ†.

![é£Žæ ¼åŒ–ä¿®é¥°æ–¹æ³•](images/20230131161052.png)

1. åœ¨ä¸¤ä¸ª text view æ‰€åœ¨çš„ `VStack` ä¹‹é—´å¢žåŠ åˆ†éš” (spacer)
   ![å¢žåŠ ç©ºæ ¼](images/20230131163847.png)
   ![æ•ˆæžœ](images/20230131165811.png)

2. åœ¨ `VStack` ä¸­æ·»åŠ é’ˆå¯¹ second elapsed çš„å‰å¯¼å¯¹é½ (leading alignment) / å·¦å¯¹é½ å’Œé’ˆå¯¹ seconds remaining çš„å°¾å¯¹é½ (trailing alignment) / å³å¯¹é½, å¦‚å›¾: 
   ![æ·»åŠ å·¦å³å¯¹é½](images/20230131170552.png)
   æ³¨æ„: é»˜è®¤çš„å¯¹é½æ˜¯ä¸­å¿ƒå¯¹é½ (center alignment), ä¿®é¥°ç¬¦ä¼š override åŽŸæœ‰çš„é»˜è®¤è¡Œä¸º. 
   ä½ ä¹Ÿå¯ä»¥é€šè¿‡é€‰æ‹© VStack, åœ¨å±žæ€§è§‚å¯Ÿå™¨ (Attributes inspector) é‡Œé¢çš„å¯¹é½é€‰é¡¹ (Alignment Options) é‡Œé¢ä¿®æ”¹å¯¹é½æ–¹å¼ 

3. ç»™ text view æ·»åŠ  `.font(.caption)` æ ·å¼æ¥å‡å°å­—ä½“

   ![è°ƒæ•´å­—ä½“](images/20230131171153.png)
   æƒ³è¦å®šåˆ¶ SwiftUI çš„è§†å›¾, è¯·è°ƒç”¨åä¸º ä¿®é¥°å™¨ (modifiers) çš„æ–¹æ³•, æ¯ä¸ªæ–¹æ³•è¿”å›žä¸€ä¸ªæ–°çš„ view, å¯ä»¥åœ¨ä¸€ä¸ªå•ç‹¬çš„ view ä¸Šä½¿ç”¨å¤šä¸ªä¿®é¥°å™¨, è¦ä½¿ç”¨é“¾å¼ä¿®é¥°å™¨, è¯·åž‚ç›´çš„å †å å®ƒä»¬.

> çŽ°åœ¨å®Œæˆäº† header çš„åŸºæœ¬æ ·å¼æž„å»º, æŽ¥ä¸‹æ¥ç»™åœ†çŽ¯åž‹çš„è¿›åº¦æ¡ä¸€ä¸ªå ä½

4. æ·»åŠ ä¸€ä¸ªå¸¦è¾¹æ¡†çš„åœ†çŽ¯æ¥å ä½, åŽé¢æ¥æ›¿æ¢è¿™ä¸ªåœ†çŽ¯çš„å ä½, å¼„ä¸€ä¸ªæ­£å„¿å…«ç»çš„åŽŸåž‹è®¡æ—¶å™¨ä¸ŠåŽ», å°±æ˜¯åœ¨ä½ çš„ `VStack` é‡Œé¢å¢žåŠ ä¸€ä¸ª `Circle()`
   ![åœ†çŽ¯å ä½](images/20230131171723.png)

> å†æžä¸€ä¸ª footer æ¥å®Œæˆæ•´ä¸ªçš„åŽŸåž‹è®¾è®¡

5. åœ¨ä½ çš„ `VStack` é‡Œé¢å¢žåŠ ä¸€ä¸ª `HStack`
   ![æžä¸ª footer](images/20230131172026.png)

6. ç»™ footer æ·»åŠ ä¸€ä¸ªå¿«è¿›æŒ‰é’®æ·»åŠ ä¸€ä¸ªå›¾ç‰‡ä½œä¸ºå®ƒçš„ label
   ![footer çš„æ ·å¼](images/20230131172222.png)

7. ç»™ footet çš„æ–‡å­—å’ŒæŒ‰é’®å¢žåŠ  `spacer`, æ³¨æ„è¿™é‡Œå¢žåŠ ä¹‹åŽä¼šè®©æ•´ä¸ªå¸ƒå±€å‘ç”Ÿå˜åŒ–, `spacer` ä¼šè‡ªåŠ¨å¡«æ»¡æ•´ä¸ª `HStack`.
   ![æ·»åŠ åˆ†éš”](images/20230131172356.png)

8. ç»™æ•´ä¸ªæœ€å¤–å±‚ (top-level)  `VStack` æ·»åŠ å¡«å……å±žæ€§, é˜²æ­¢è´´è¾¹, æ³¨æ„è§‚çœ‹å˜åŒ–
   ![å¾€é‡Œç¼©ä¸€ç¼©](images/20230131172614.png)

## ç¬¬å››éƒ¨åˆ† è¡¥å……æ— éšœç¢è®¿é—®æ•°æ®

SwiftUI å…·æœ‰å†…ç½®æ— éšœç¢è¾…åŠ©åŠŸèƒ½ï¼Œå› æ­¤æ‚¨åªéœ€å¾ˆå°‘çš„é¢å¤–å·¥ä½œå³å¯èŽ·å¾—æ— éšœç¢è¾…åŠ©åŠŸèƒ½æ”¯æŒã€‚ ä¾‹å¦‚ï¼Œæ–‡æœ¬è§†å›¾ä¸­çš„å­—ç¬¦ä¸²å†…å®¹å¯ä»¥è‡ªåŠ¨æ”¯æŒ VoiceOver ç­‰è®¾å¤‡åŠŸèƒ½ã€‚ ä½†æœ‰æ—¶ï¼Œæ‚¨å¯èƒ½å¸Œæœ›è¡¥å……ç³»ç»ŸæŽ¨æ–­çš„æ•°æ®ä»¥å¢žå¼ºç”¨æˆ·çš„æ— éšœç¢å¯è®¿é—®æ€§ä½“éªŒã€‚
![æ— éšœç¢è®¿é—®è¯´æ˜Ž](images/20230131173014.png)

> é»˜è®¤æƒ…å†µä¸‹, VoiceOver ä»Žå›¾ç‰‡çš„ header å±žæ€§èŽ·å–å®ƒçš„ç³»ç»Ÿåç§°: hourglass.bottomhalf.fill and hourglass.tophalf.fill.
> (å¢žè¡¥: æ‰€ä»¥ä½ çš„å‘½ååº”å½“å…·å¤‡å¯è¯»æ€§, æ®‹éšœäººå£«èŽ·å–ç³»ç»Ÿä¿¡æ¯æ˜¯é è¿™äº›æ•°æ®æ¥ä¼ è¾¾çš„, å½“ç„¶æ›´å¥½çš„æ–¹å¼æ˜¯ç»™ä»–ä¸€ä¸ªæ›´åŠ ç®€æ´æ˜“æ‡‚çš„åç§°)

![æ— éšœç¢è®¿é—®ä¼˜åŒ–](images/20230131174636.png)

1. æ˜¾å¼çš„å¿½ç•¥ header ä¸­ `HStack` ä¸­å­è§†å›¾çš„é»˜è®¤æŽ¨æ–­çš„æ— éšœç¢æ ‡ç­¾æ•°æ®
2. ç»™å¯¹åº”å…ƒç´ ä¸€ä¸ªå¯æ‡‚çš„åç§°æ ‡ç­¾, æ³¨æ„, è¿™é‡Œæœ‰ä¸¤ä¸ªæ ‡ç­¾, ä¸Žå…¶è®©ç”¨æˆ·å¬ä¸¤ä¸ªæ ‡ç­¾ä¸å¦‚ç›´æŽ¥ç»™ä¸€ä¸ªæ›´å¥½æ‡‚çš„åç§°, ç›´æŽ¥ç»™å‡ºæœ€æ ¸å¿ƒçš„ä¿¡æ¯
3. ç»™è¿™ä¸ªå…ƒç´ å¢žåŠ ä¸€ä¸ªå¯è¯»å‡ºçš„æ ‡ç­¾å€¼, å› ä¸ºä¸»åŠ¨å¿½ç•¥äº†æ ‡ç­¾çš„å€¼, æ‰€ä»¥è¿™é‡Œæ‰‹åŠ¨ç»™å‡º, å¦åˆ™ç³»ç»Ÿä¼šè‡ªåŠ¨æŽ¨æ–­è¿™ä¸ªå€¼ (å½“ç„¶è¿™é‡Œç»™çš„æ˜¯ä¸ªå‡æ•°æ®)
4. é’ˆå¯¹ footer ä¸­çš„å¿«è¿›æŒ‰é’®ç»™å‡ºä¸€ä¸ªè¾…åŠ©è®¿é—®æ ‡ç­¾, VoiceOver ä¼šæŒ‰ç…§ç»™å®šçš„è¾…åŠ©è®¿é—®ç‰¹å¾è¯»å‡ºè¿™ä¸ªå…ƒç´ 

åœ¨ç»§ç»­å­¦ä¹ ä¸‹ä¸€è¯¾ä¹‹å‰ï¼Œè¯·èŠ±ç‚¹æ—¶é—´ review ä¸€ä¸‹æ‚¨å–å¾—çš„è¿›æ­¥ã€‚ æ‚¨ä½¿ç”¨äº† SwiftUI çš„åŸºæœ¬æž„å»ºå— â€”â€” è§†å›¾ (Views) / å †æ ˆ (Stacks) / ä¿®é¥°ç¬¦ (modifiers) â€”â€” æ¥ç»„æˆåŽŸåž‹è®¡æ—¶å™¨è§†å›¾ã€‚ ä½ è®©æ— éšœç¢ä½“éªŒæ›´æœ‰æ„ä¹‰ã€‚ æ‰€æœ‰è¿™äº›å¤§çº¦èŠ±äº† 40 è¡Œä»£ç 

## ä¹ é¢˜
#### 1. ä»¥ä¸‹è¿™ä¸ªè§†å›¾æ˜¯ç”±é‚£ä¸ªä»£ç ç‰‡æ®µç”Ÿæˆçš„?
![ç¬¬ä¸€é¢˜ç›®](images/20230131174855.png)
é€‰ä¸€ä¸ªå§:
![ç¬¬ä¸€é€‰é¡¹](images/20230131175026.png)
#### 2. ä»¥ä¸‹å“ªä¸ªä»£ç ç‰‡æ®µç»™ text view è®¾å®šäº†å­—ä½“?
![ç¬¬äºŒé¢˜](images/20230131175158.png)
#### 3. ä»¥ä¸‹å“ªä¸ªä»£ç ç‰‡æ®µå¯ä»¥è®© VoiceOver è¾“å‡º "Skip song. Button"?
![ç¬¬ä¸‰é¢˜](images/20230131182425.png)

> ç­”æ¡ˆæ˜¯
> .
> .
> .
> .
> .
> .
> .
> .
> .
> .
> .
> .
> .
> .
> .
> 3 - 2 - 1